{% extends "base.html" %}

{% block title %}Dashboard - Jellyswarrm{% endblock %}

{% block body %}
    <!-- Navigation -->
    <header class="container">
        <nav>
            <ul>
                <li>
                    <a href="/{{ ui_route }}" style="display: flex; align-items: center; text-decoration: none;">
                        <img src="/{{ ui_route }}/resources/icon.svg" alt="Jellyswarrm Logo" style="width: 120px; height: 120px; margin-right: 0.25rem;">
                        <strong>Jellyswarrm</strong>
                    </a>
                </li>
            </ul>
            <ul>

                {% block tabs %}{% endblock %}
                <li>
                    {% match root %}{% when Some with (r) %}<a href="/{{ r }}" target="_blank">{% when None %}<a href="/" target="_blank">{% endmatch %}
                        <i class="fas fa-film" style="margin-right: 0.25rem;"></i>
                        Web UI
                    </a>
                </li>
                <li>
                    <a href="/{{ ui_route }}/logout" role="button" class="secondary outline" aria-label="Logout">
                        <i class="fas fa-sign-out-alt"></i>
                    </a>
                </li>
                <li>
                    <button onclick="toggleTheme()" aria-label="Toggle theme" class="secondary" style="padding: 0.25rem;">
                        <i class="fas fa-adjust"></i>
                    </button>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Main content -->
    <main class="container">
        <!-- Flash messages -->
        <div id="messages" style="margin-bottom: 1rem;">
            <!-- Messages will be dynamically loaded here via HTMX -->
        </div>

        <!-- Main content area -->
        {% block main_content %} {% endblock %}
        
    </main>

    <!-- Footer -->
    <footer class="container" style="margin-top: 3rem;">
        <hr>
        <div style="text-align: center; padding: 1rem 0;">
            <p style="margin: 0; color: var(--pico-muted-color); font-size: 0.85rem;">
                <i class="fas fa-server" style="margin-right: 0.5rem;"></i>
                <a href="https://github.com/LLukas22/Jellyswarrm">Jellyswarrm Proxy Server
                {% match version %}{% when Some with (v) %} v{{ v }}{% when None %}{% endmatch %}
                </a>
            </p>
            <p style="margin: 0.5rem 0 0 0; color: var(--pico-muted-color); font-size: 0.75rem;">
                <i class="fas fa-film" style="margin-right: 0.5rem;"></i>
                {% match jellyfin_ui_version %}{% when Some with (ui) %}<a href="https://github.com/jellyfin/jellyfin-web/tree/{{ ui.version }}" target="_blank">Jellyfin Web UI {{ ui.version }}</a>{% when None %}Jellyfin Web UI: UNKNOWN{% endmatch %}
            </p>
            <p style="margin: 0.5rem 0 0 0; color: var(--pico-muted-color); font-size: 0.75rem;">
                <i class="fas fa-heart" style="margin-right: 0.25rem; color: var(--pico-del-color);"></i>
                Built with Rust & HTMX
            </p>
        </div>
    </footer>
{% endblock %}
