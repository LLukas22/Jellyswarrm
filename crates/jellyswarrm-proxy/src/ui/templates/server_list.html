<style>
/* Lightweight shared styles (can be moved to global if reused) */
.icon-btn {--_size:.7rem; font-size:var(--_size); line-height:1; padding:.3rem .45rem; display:inline-flex; align-items:center; justify-content:center; border:1px solid var(--muted-border,#555); background:transparent; cursor:pointer;}
.icon-btn:hover {background:rgba(255,255,255,.05);}
.icon-btn.danger {color:var(--del,#e55353); border-color:var(--del,#e55353);}
.status-chip {font-size:.65rem; padding:.25rem .55rem; border-radius:1rem; background:var(--pill-bg,rgba(127,127,127,.15)); display:inline-block; min-width:70px; text-align:center;}
</style>

{% if servers.is_empty() %}
    <article>
        <header><h4>No servers configured</h4></header>
        <p>Add your first Jellyfin server to get started.</p>
    </article>
{% else %}
<table aria-label="Registered servers">
    <thead>
        <tr>
            <th>Name</th>
            <th>URL</th>
            <th>Priority</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for server in servers %}
        <tr>
            <td><strong>{{ server.name }}</strong></td>
            <td><a href="{{ server.url }}" target="_blank" rel="noopener noreferrer">{{ server.url }}</a></td>
            <td>
          <input type="number" value="{{ server.priority }}" min="1" max="999"
              hx-patch="/ui/servers/{{ server.id }}/priority"
              hx-trigger="change delay:200ms"
              hx-include="closest tr"
              name="priority"
              hx-target="#server-list" hx-swap="innerHTML"
              style="width: 130px; min-width: 130px;">
            </td>
            <td>
                <span hx-get="/ui/servers/{{ server.id }}/status" 
                      hx-trigger="load, every 5s" 
                      hx-swap="outerHTML"
                      style="min-width: 80px; display: inline-block;">
                    <span style="color: #666;">Checking...</span>
                </span>
            </td>
            <td style="text-align: center;">
                                <button type="button" class="icon-btn danger"
                        hx-delete="/ui/servers/{{ server.id }}"
                        hx-confirm="Delete server '{{ server.name }}'?"
                        hx-target="#server-list" hx-swap="innerHTML"
                        title="Delete server">
                                    <i class="fas fa-trash" aria-hidden="true"></i><span class="sr-only" style="position:absolute;left:-9999px;">Delete</span>
                </button>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endif %}
